{% extends "base.html" %}
{% block title %}Buscar - Blog Demo{% endblock %}
{% block content %}
  <div class="grid">
    <div>
      <div class="card">
        <h2 style="margin:0">Buscar</h2>
        <div class="muted">Búsqueda simple “vintage” (LIKE) con paginación.</div>
        <div style="height:10px"></div>
        <form method="get" action="{{ url_for('search') }}">
          <input type="text" name="q" value="{{ q }}" placeholder="Buscar...">
          <div style="height:10px"></div>
          <button type="submit">Buscar</button>
        </form>
      </div>

      {% if q %}
        <div class="card"><div class="muted">Resultados para: <strong>{{ q }}</strong></div></div>
      {% endif %}

      {% for p in posts %}
        <div class="card">
          <h3 style="margin:0"><a href="{{ url_for('post_view', slug=p.slug) }}">{{ p.title }}</a></h3>
          <div class="muted" style="margin-top:6px">{{ p.publish_at.strftime("%Y-%m-%d") }}</div>
          <p style="white-space: pre-wrap; margin-top:10px">{{ excerpt(p.content, 260) }}</p>
        </div>
      {% else %}
        <div class="card"><p class="muted">No hay resultados.</p></div>
      {% endfor %}

      <div class="card pagination">
        <div class="muted">Página {{ page }} de {{ pages }} · Total: {{ total }}</div>
        <div style="margin-top:10px;">
          {% if page > 1 %}<a href="{{ url_for('search', q=q, page=page-1) }}">← Anterior</a>{% endif %}
          {% if page < pages %}<a href="{{ url_for('search', q=q, page=page+1) }}">Siguiente →</a>{% endif %}
        </div>
      </div>
    </div>

    {% include "_sidebar.html" %}
  </div>
{% endblock %}
