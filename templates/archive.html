{% extends "base.html" %}
{% block title %}Archivo {{ year }}-{{ "%02d"|format(month) }} - Blog Demo{% endblock %}
{% block content %}
  <div class="grid">
    <div>
      <div class="card">
        <h2 style="margin:0">Archivo: {{ year }}-{{ "%02d"|format(month) }}</h2>
        <div class="muted">Posts publicados en este mes.</div>
      </div>

      {% for p in posts %}
        <div class="card">
          <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
            <h3 style="margin:0"><a href="{{ url_for('post_view', slug=p.slug) }}">{{ p.title }}</a></h3>
            <span class="badge">{{ p.publish_at.strftime("%Y-%m-%d") }}</span>
          </div>
          <p style="white-space: pre-wrap; margin-top:10px">{{ excerpt(p.content, 260) }}</p>
        </div>
      {% else %}
        <div class="card"><p class="muted">No hay posts en este mes.</p></div>
      {% endfor %}

      <div class="card pagination">
        <div class="muted">Página {{ page }} de {{ pages }} · Total: {{ total }}</div>
        <div style="margin-top:10px;">
          {% if page > 1 %}<a href="{{ url_for('archive', year=year, month=month, page=page-1) }}">← Anterior</a>{% endif %}
          {% if page < pages %}<a href="{{ url_for('archive', year=year, month=month, page=page+1) }}">Siguiente →</a>{% endif %}
        </div>
      </div>
    </div>

    {% include "_sidebar.html" %}
  </div>
{% endblock %}
